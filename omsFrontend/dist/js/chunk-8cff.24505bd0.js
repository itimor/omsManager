(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8cff"],{"70ed":function(e,t,r){"use strict";var a=r("eda3"),o=r.n(a);o.a},7526:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"components-container"},[r("div",{staticClass:"head-lavel"},[r("div",{staticClass:"table-button"},["admin"===e.username?r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.addForm=!0}}},[e._v("新建")]):e._e()],1),r("div",{staticClass:"table-search"})]),r("Table",{attrs:{border:"",stripe:"",data:e.tableData,columns:e.tablecolumns}}),r("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:e.tableCount,current:1,"show-total":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePagesize}})],1)]),r("Modal",{attrs:{title:"新建","footer-hide":""},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[r("add-group",{on:{DialogStatus:e.getDialogStatus}})],1),r("Modal",{attrs:{title:"修改","footer-hide":""},model:{value:e.editForm,callback:function(t){e.editForm=t},expression:"editForm"}},[r("edit-group",{attrs:{ruleForm:e.ruleForm},on:{DialogStatus:e.getDialogStatus}})],1)],1)},o=[],s=r("c93e"),n=(r("cadf"),r("551c"),r("097d"),r("c24f")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"username"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("FormItem",{attrs:{label:"头像",prop:"avator"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.avator,callback:function(t){e.$set(e.ruleForm,"avator",t)},expression:"ruleForm.avator"}})],1),r("FormItem",{attrs:{label:"角色",prop:"roles"}},[r("Select",{attrs:{multiple:""},model:{value:e.ruleForm.roles,callback:function(t){e.$set(e.ruleForm,"roles",t)},expression:"ruleForm.roles"}},e._l(e.roles,function(t){return r("Option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],1),r("FormItem",{attrs:{label:"密码",prop:"password"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("FormItem",{attrs:{label:"激活",prop:"is_active"}},[r("Checkbox",{model:{value:e.ruleForm.is_active,callback:function(t){e.$set(e.ruleForm,"is_active",t)},expression:"ruleForm.is_active"}},[e._v("账号激活")])],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},i=[],u=(r("7f7f"),{data:function(){return{ruleForm:{username:"",uid:"",avator:"http://ask.rednet.cn/uploads/answer/20160602/5a6b156af6661779840dd6b28e7e1898.jpg",password:"",roles:[],is_active:!0},rules:{username:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],uid:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],password:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],roles:[{required:!0,type:"array",message:"The input cannot be empty",trigger:"change"}]},roles:[]}},created:function(){this.fetchRoleData()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(n["g"])(t.ruleForm).then(function(){t.$emit("DialogStatus",!1)}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})},fetchRoleData:function(){var e=this;Object(n["c"])(this.listQuery).then(function(t){e.roles=t.data})}}}),c=u,m=r("2877"),p=Object(m["a"])(c,l,i,!1,null,null,null);p.options.__file="adduser.vue";var d=p.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"username"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("FormItem",{attrs:{label:"头像",prop:"avator"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.avator,callback:function(t){e.$set(e.ruleForm,"avator",t)},expression:"ruleForm.avator"}})],1),r("FormItem",{attrs:{label:"角色",prop:"roles"}},[r("Select",{attrs:{multiple:""},model:{value:e.ruleForm.roles,callback:function(t){e.$set(e.ruleForm,"roles",t)},expression:"ruleForm.roles"}},e._l(e.roles,function(t){return r("Option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],1),r("FormItem",{attrs:{label:"密码",prop:"password"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("FormItem",{attrs:{label:"激活",prop:"is_active"}},[r("Checkbox",{model:{value:e.ruleForm.is_active,callback:function(t){e.$set(e.ruleForm,"is_active",t)},expression:"ruleForm.is_active"}},[e._v("账号激活")])],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},h=[],F={props:{ruleForm:{type:Object}},data:function(){return{rules:{username:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],uid:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],password:[{required:!0,message:"The input cannot be empty",trigger:"blur"}]},roles:[]}},created:function(){this.fetchRoleData()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(n["e"])(t.ruleForm.id,t.ruleForm).then(function(){t.$emit("DialogStatus",!1)}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})},fetchRoleData:function(){var e=this;Object(n["c"])(this.listQuery).then(function(t){e.roles=t.data})}}},v=F,b=Object(m["a"])(v,f,h,!1,null,null,null);b.options.__file="edituser.vue";var g=b.exports,y=r("2f62"),_={components:{addGroup:d,editGroup:g},data:function(){return{tableData:[],tableCount:10,listQuery:{limit:10,offset:0,search:""},addForm:!1,editForm:!1,ruleForm:{}}},computed:Object(s["a"])({},Object(y["c"])(["role","username"]),{tablecolumns:function(){var e=this,t=[];return t.push({title:"名称",key:"username"}),t.push({title:"头像",key:"avator",render:function(e,t){return e("Poptip",{props:{transfer:!0,trigger:"hover"}},[e("img",{attrs:{src:t.row.avator},style:{width:"200px"},slot:"content"}),e("Avatar",{props:{src:t.row.avator}})])}}),t.push({title:"角色",key:"roles"}),t.push({title:"激活",key:"is_active"}),"admin"===this.username&&t.push({title:"操作",key:"action",align:"center",render:function(t,r){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editForm=!0,e.ruleForm=r.row}}},"修改"),t("Poptip",{props:{title:"确定要删除吗！",confirm:!0,transfer:!0,placement:"top-end"},on:{"on-ok":function(){Object(n["b"])(r.row.id).then(function(t){e.fetchData()})},"on-cancel":function(){e.$Message.info("取消删除")}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}}),t}}),created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;Object(n["d"])(this.listQuery).then(function(t){e.tableData=t.data.results,e.tableCount=t.data.count})},getDialogStatus:function(e){this.addForm=e,this.editForm=e,this.fetchData()},changePage:function(e){this.listQuery.offset=(e-1)*this.listQuery.limit,this.fetchData()},changePagesize:function(e){this.listQuery.limit=e,this.fetchData()},searchClick:function(){this.fetchData()}}},k=_,w=(r("70ed"),Object(m["a"])(k,a,o,!1,null,null,null));w.options.__file="users.vue";t["default"]=w.exports},eda3:function(e,t,r){}}]);