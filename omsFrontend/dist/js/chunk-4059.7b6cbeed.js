(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4059"],{"28c1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"components-container"},[r("div",{staticClass:"head-lavel"},[r("div",{staticClass:"table-button"},["admin"===e.username?r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.addForm=!0}}},[e._v("新建")]):e._e()],1),r("div",{staticClass:"table-search"})]),r("Table",{attrs:{border:"",stripe:"",data:e.tableData,columns:e.tablecolumns}}),r("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:e.tableCount,current:1,"show-total":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePagesize}})],1)]),r("Modal",{attrs:{title:"新建","footer-hide":""},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[r("add-group",{on:{DialogStatus:e.getDialogStatus}})],1),r("Modal",{attrs:{title:"修改","footer-hide":""},model:{value:e.editForm,callback:function(t){e.editForm=t},expression:"editForm"}},[r("edit-group",{attrs:{ruleForm:e.ruleForm},on:{DialogStatus:e.getDialogStatus}})],1),r("Modal",{attrs:{title:"白名单设置","footer-hide":"",width:"800"},model:{value:e.addWriteForm,callback:function(t){e.addWriteForm=t},expression:"addWriteForm"}},[r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":80}},[r("FormItem",{attrs:{label:"值",prop:"value"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20},placeholder:"多个ip用着`,`分割，如 `127.0.0.1,128.0.0.1`"},model:{value:e.ruleForm.value,callback:function(t){e.$set(e.ruleForm,"value",t)},expression:"ruleForm.value"}}),r("a",{staticClass:"tips"},[e._v("Tip：多个ip用着`,`分割，如 `127.0.0.1,128.0.0.1`")])],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)],1)},n=[],o=(r("7f7f"),r("c93e")),i=(r("cadf"),r("551c"),r("097d"),r("8b67")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("FormItem",{attrs:{label:"站点id",prop:"siteid"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.siteid,callback:function(t){e.$set(e.ruleForm,"siteid",t)},expression:"ruleForm.siteid"}})],1),r("FormItem",{attrs:{label:"备注",prop:"desc"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:"input"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},u=[],l={data:function(){return{ruleForm:{name:"",siteid:"",desc:""},rules:{name:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],siteid:[{required:!0,message:"The input cannot be empty",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(i["f"])(t.ruleForm).then(function(){t.$emit("DialogStatus",!1)}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})}}},c=l,m=r("2877"),d=Object(m["a"])(c,s,u,!1,null,null,null);d.options.__file="addsite.vue";var p=d.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("FormItem",{attrs:{label:"站点id",prop:"siteid"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:e.ruleForm.siteid,callback:function(t){e.$set(e.ruleForm,"siteid",t)},expression:"ruleForm.siteid"}})],1),r("FormItem",{attrs:{label:"备注",prop:"desc"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:"input"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},h=[],F={props:{ruleForm:{type:Object}},data:function(){return{rules:{name:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],siteid:[{required:!0,message:"The input cannot be empty",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(i["g"])(t.ruleForm.id,t.ruleForm).then(function(){t.$emit("DialogStatus",!1)}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})}}},g=F,b=Object(m["a"])(g,f,h,!1,null,null,null);b.options.__file="editsite.vue";var v=b.exports,y=r("2f62"),x={components:{addGroup:p,editGroup:v},data:function(){return{tableData:[],tableCount:10,listQuery:{limit:10,offset:0,search:""},addForm:!1,editForm:!1,addWriteForm:!1,ruleForm:{}}},computed:Object(o["a"])({},Object(y["c"])(["role","username"]),{tablecolumns:function(){var e=this,t=[];return t.push({title:"名称",key:"name"}),t.push({title:"备注",key:"desc"}),t.push({title:"操作",key:"action",align:"center",render:function(t,r){return t("div",[t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t={name:r.row.name};Object(i["b"])(t).then(function(r){e.addWriteForm=!0,e.ruleForm.name=t.name,e.ruleForm.value=r.data}).catch(function(t){console.log(t);var r=JSON.stringify(t.response.data);e.$Message.error(r)})}}},"白名单"),t("Button",{props:{type:"success",size:"small",disabled:"admin"!==e.username},style:{marginRight:"5px"},on:{click:function(){e.editForm=!0,e.ruleForm=r.row}}},"修改"),t("Poptip",{props:{title:"确定要删除吗！",confirm:!0,transfer:!0,placement:"top-end"},on:{"on-ok":function(){Object(i["a"])(r.row.id).then(function(t){e.fetchData()})},"on-cancel":function(){e.$Message.info("取消删除")}}},[t("Button",{props:{type:"error",size:"small",disabled:"admin"!==e.username}},"删除")])])}}),t}}),created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;Object(i["c"])(this.listQuery).then(function(t){e.tableData=t.data.results,e.tableCount=t.data.count})},fetchWhiteipData:function(){},getDialogStatus:function(e){this.addForm=e,this.editForm=e,this.addWriteForm=e,this.fetchData()},changePage:function(e){this.listQuery.offset=(e-1)*this.listQuery.limit,this.fetchData()},changePagesize:function(e){this.listQuery.limit=e,this.fetchData()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(i["e"])(t.ruleForm).then(function(e){t.$Message.success(e.data.response),t.addWriteForm=!1}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})}}},$=x,k=(r("db22"),Object(m["a"])($,a,n,!1,null,null,null));k.options.__file="cdnsites.vue";t["default"]=k.exports},"5e5e":function(e,t,r){},"8b67":function(e,t,r){"use strict";r.d(t,"f",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"g",function(){return s}),r.d(t,"a",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return c}),r.d(t,"b",function(){return m});var a=r("66df"),n=r("f121");function o(e){return a["a"].request({url:n["a"].greycdnsites,method:"post",data:e})}function i(e){return a["a"].request({url:n["a"].greycdnsites,method:"get",params:e})}function s(e,t){return a["a"].request({url:n["a"].greycdnsites+e+"/",method:"put",data:t})}function u(e){return a["a"].request({url:n["a"].greycdnsites+e+"/",method:"delete"})}function l(e){return a["a"].request({url:n["a"].greycdnwhiteips,method:"get",params:e})}function c(e){return a["a"].request({url:n["a"].actiongreycdn,method:"post",data:e})}function m(e){return a["a"].request({url:n["a"].actiongreycdn,method:"get",params:e})}},db22:function(e,t,r){"use strict";var a=r("5e5e"),n=r.n(a);n.a}}]);