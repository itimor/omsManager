(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67cc"],{"301e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"components-container"},[r("div",{staticClass:"head-lavel"},[r("div",{staticClass:"table-button"},[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.addForm=!0}}},[e._v("新建")]),r("Button",{directives:[{name:"show",rawName:"v-show",value:e.sync,expression:"sync"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success",loading:e.sync}},[e._v("同步中")])],1),r("div",{staticClass:"table-search"})]),r("Table",{attrs:{border:"",stripe:"",data:e.tableData,columns:e.tablecolumns}}),r("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:e.tableCount,current:1,"show-total":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePagesize}})],1)]),r("Modal",{attrs:{title:"新建","footer-hide":""},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[r("add-group",{on:{DialogStatus:e.getDialogStatus}})],1),r("Modal",{attrs:{title:"修改","footer-hide":""},model:{value:e.editForm,callback:function(t){e.editForm=t},expression:"editForm"}},[r("edit-group",{attrs:{ruleForm:e.ruleForm},on:{DialogStatus:e.getDialogStatus}})],1)],1)},a=[],o=r("c93e"),s=(r("7f7f"),r("cadf"),r("551c"),r("097d"),r("8f68")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("FormItem",{attrs:{label:"key",prop:"key"}},[r("Input",{attrs:{type:"text",placeholder:"key"},model:{value:e.ruleForm.key,callback:function(t){e.$set(e.ruleForm,"key",t)},expression:"ruleForm.key"}})],1),r("FormItem",{attrs:{label:"secret",prop:"secret"}},[r("Input",{attrs:{type:"text",placeholder:"secret"},model:{value:e.ruleForm.secret,callback:function(t){e.$set(e.ruleForm,"secret",t)},expression:"ruleForm.secret"}})],1),r("FormItem",{attrs:{label:"类型",prop:"type"}},[r("Select",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.Dns_Types,function(t){return r("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},u=[],l={data:function(){return{ruleForm:{name:"",key:"",secret:"",type:""},rules:{name:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],key:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],secret:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],type:[{required:!0,message:"The select cannot be empty",trigger:"change"}]},Dns_Types:["dnspod","godaddy","namesilo"]}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(s["f"])(t.ruleForm).then(function(){t.$emit("DialogStatus",!1)}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})}}},c=l,m=r("2877"),d=Object(m["a"])(c,i,u,!1,null,null,null);d.options.__file="adddnstapi.vue";var p=d.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("FormItem",{attrs:{label:"key",prop:"key"}},[r("Input",{attrs:{type:"text",placeholder:"key"},model:{value:e.ruleForm.key,callback:function(t){e.$set(e.ruleForm,"key",t)},expression:"ruleForm.key"}})],1),r("FormItem",{attrs:{label:"secret",prop:"secret"}},[r("Input",{attrs:{type:"text",placeholder:"secret"},model:{value:e.ruleForm.secret,callback:function(t){e.$set(e.ruleForm,"secret",t)},expression:"ruleForm.secret"}})],1),r("FormItem",{attrs:{label:"类型",prop:"type"}},[r("Select",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.Dns_Types,function(t){return r("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},y=[],h={props:{ruleForm:{type:Object}},data:function(){return{rules:{name:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],key:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],secret:[{required:!0,message:"The input cannot be empty",trigger:"blur"}],type:[{required:!0,message:"The select cannot be empty",trigger:"change"}]},Dns_Types:["dnspod","godaddy","namesilo"]}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?Object(s["g"])(t.ruleForm.id,t.ruleForm).then(function(){t.$emit("DialogStatus",!1)}).catch(function(e){var r=JSON.stringify(e.response.data);t.$Message.error(r)}):t.$Message.error("请认真填写!")})}}},g=h,b=Object(m["a"])(g,f,y,!1,null,null,null);b.options.__file="editdnsapi.vue";var F=b.exports,v=r("2f62"),k={components:{addGroup:p,editGroup:F},data:function(){var e=this;return{tableData:[],tableCount:10,tablecolumns:[{title:"名称",key:"name"},{title:"key",key:"key"},{title:"类型",key:"type"},{title:"操作",key:"action",align:"center",render:function(t,r){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editForm=!0,e.ruleForm=r.row}}},"修改"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.dnsQuery.dnsname=r.row.name,e.dnsQuery.type=r.row.type,e.syncDomwin()}}},"同步"),t("Poptip",{props:{title:"确定要删除吗！",confirm:!0,transfer:!0,placement:"top-end"},on:{"on-ok":function(){Object(s["c"])(r.row.id).then(function(t){e.fetchData()})},"on-cancel":function(){e.$Message.info("取消删除")}}},[t("Button",{props:{type:"error",size:"small",disabled:!(e.roles.indexOf("admin")>-1)}},"删除")])])}}],sync:!1,listQuery:{limit:10,offset:0,search:""},addForm:!1,editForm:!1,ruleForm:{},dnsQuery:{dnsname:"",type:""}}},created:function(){this.fetchData()},computed:Object(o["a"])({},Object(v["c"])(["roles"])),methods:{fetchData:function(){var e=this;Object(s["d"])(this.listQuery).then(function(t){e.tableData=t.data.results,e.tableCount=t.data.count})},getDialogStatus:function(e){this.addForm=e,this.editForm=e,this.fetchData()},changePage:function(e){this.listQuery.offset=(e-1)*this.listQuery.limit,this.fetchData()},changePagesize:function(e){this.listQuery.limit=e,this.fetchData()},searchClick:function(){this.fetchData()},syncDomwin:function(){var e=this;this.$Message.info("正在同步中，请稍后"),this.sync=!0,"godaddy"===this.dnsQuery.type?Object(s["a"])(this.dnsQuery).then(function(){e.sync=!1}).catch(function(t){var r=JSON.stringify(t.response.data);e.$Message.error(r)}):"namesilo"===this.dnsQuery.type&&Object(s["b"])(this.dnsQuery).then(function(){e.sync=!1}).catch(function(t){var r=JSON.stringify(t.response.data);e.$Message.error(r)})}}},_=k,x=(r("5757"),Object(m["a"])(_,n,a,!1,null,null,null));x.options.__file="dnsapis.vue";t["default"]=x.exports},5757:function(e,t,r){"use strict";var n=r("c9c8"),a=r.n(n);a.a},"8f68":function(e,t,r){"use strict";r.d(t,"f",function(){return o}),r.d(t,"d",function(){return s}),r.d(t,"g",function(){return i}),r.d(t,"c",function(){return u}),r.d(t,"e",function(){return l}),r.d(t,"a",function(){return c}),r.d(t,"b",function(){return m});var n=r("66df"),a=r("f121");function o(e){return n["a"].request({url:a["a"].dnsapis,method:"post",data:e})}function s(e){return n["a"].request({url:a["a"].dnsapis,method:"get",params:e})}function i(e,t){return n["a"].request({url:a["a"].dnsapis+e+"/",method:"put",data:t})}function u(e){return n["a"].request({url:a["a"].dnsapis+e+"/",method:"delete"})}function l(e){return n["a"].request({url:a["a"].dnsdomains,method:"get",params:e})}function c(e){return n["a"].request({url:a["a"].godaddydomains,method:"post",data:e})}function m(e){return n["a"].request({url:a["a"].namesilodomains,method:"post",data:e})}},c9c8:function(e,t,r){}}]);