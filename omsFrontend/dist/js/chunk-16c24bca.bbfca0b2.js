(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16c24bca"],{"08cb":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"components-container"},[r("div",{staticClass:"head-lavel"},[r("div",{staticClass:"table-button"},["admin"===t.username?r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){t.addForm=!0}}},[t._v("新建")]):t._e()],1),r("div",{staticClass:"table-search"})]),r("Table",{attrs:{border:"",stripe:"",data:t.tableData,columns:t.tablecolumns}}),r("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:t.tableCount,current:1,"show-total":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePagesize}})],1)]),r("Modal",{attrs:{title:"新建","footer-hide":""},model:{value:t.addForm,callback:function(e){t.addForm=e},expression:"addForm"}},[r("add-group",{on:{DialogStatus:t.getDialogStatus}})],1),r("Modal",{attrs:{title:"修改","footer-hide":""},model:{value:t.editForm,callback:function(e){t.editForm=e},expression:"editForm"}},[r("edit-group",{attrs:{ruleForm:t.ruleForm},on:{DialogStatus:t.getDialogStatus}})],1),r("Modal",{attrs:{title:t.vhost+"-白名单设置","footer-hide":""},model:{value:t.addWriteForm,callback:function(e){t.addWriteForm=e},expression:"addWriteForm"}},[r("add-whiteip",{attrs:{ruleForm:t.ruleForm},on:{DialogStatus:t.getDialogStatus}})],1)],1)},o=[],n=(r("7f7f"),r("c93e")),s=(r("cadf"),r("551c"),r("097d"),r("2d7e")),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),r("FormItem",{attrs:{label:"备注",prop:"desc"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:"input"},model:{value:t.ruleForm.desc,callback:function(e){t.$set(t.ruleForm,"desc",e)},expression:"ruleForm.desc"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)},u=[],l={data:function(){return{ruleForm:{name:"",desc:""},rules:{name:[{required:!0,message:"The input cannot be empty",trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?Object(s["f"])(e.ruleForm).then(function(){e.$emit("DialogStatus",!1)}).catch(function(t){var r=JSON.stringify(t.response.data);e.$Message.error(r)}):e.$Message.error("请认真填写!")})}}},c=l,m=r("2877"),d=Object(m["a"])(c,i,u,!1,null,null,null);d.options.__file="addsite.vue";var p=d.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":80}},[r("FormItem",{attrs:{label:"名称",prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"input"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),r("FormItem",{attrs:{label:"备注",prop:"desc"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:"input"},model:{value:t.ruleForm.desc,callback:function(e){t.$set(t.ruleForm,"desc",e)},expression:"ruleForm.desc"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)},h=[],F={props:{ruleForm:{type:Object}},data:function(){return{rules:{name:[{required:!0,message:"The input cannot be empty",trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?Object(s["g"])(e.ruleForm.id,e.ruleForm).then(function(){e.$emit("DialogStatus",!1)}).catch(function(t){var r=JSON.stringify(t.response.data);e.$Message.error(r)}):e.$Message.error("请认真填写!")})}}},g=F,b=Object(m["a"])(g,f,h,!1,null,null,null);b.options.__file="editsite.vue";var v=b.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Form",{ref:"ruleForm",attrs:{model:t.ruleForm,"label-width":80}},[r("FormItem",{attrs:{label:"值",prop:"value"}},[r("Input",{attrs:{type:"textarea",rows:4,placeholder:"多个ip用着`|`分割，如 `127.0.0.1|128.0.0.1`"},model:{value:t.ruleForm.value,callback:function(e){t.$set(t.ruleForm,"value",e)},expression:"ruleForm.value"}}),r("a",{staticClass:"tips"},[t._v("Tip：多个ip用着`|`分割，如 `127.0.0.1|128.0.0.1`")])],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)},$=[],w={props:{ruleForm:{type:Object}},data:function(){return{}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t?Object(s["e"])(e.ruleForm).then(function(t){1==t.data.status.code?(e.$Message.success(t.data.status.message),e.$emit("DialogStatus",!1)):e.$Message.error(t.data)}).catch(function(t){var r=JSON.stringify(t.response.data);e.$Message.error(r)}):e.$Message.error("请认真填写!")})}}},k=w,D=Object(m["a"])(k,y,$,!1,null,null,null);D.options.__file="addwhiteip.vue";var _=D.exports,x=r("2f62"),O={components:{addGroup:p,editGroup:v,addWhiteip:_},data:function(){return{tableData:[],tableCount:10,listQuery:{limit:10,offset:0,search:""},addForm:!1,editForm:!1,addWriteForm:!1,ruleForm:{},vhost:""}},computed:Object(n["a"])({},Object(x["c"])(["role","username"]),{tablecolumns:function(){var t=this,e=[];return e.push({title:"名称",key:"name"}),e.push({title:"备注",key:"desc"}),e.push({title:"操作",key:"action",align:"center",render:function(e,r){return e("div",[e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.addWriteForm=!0,t.vhost=r.row.name,t.fetchWhiteipData()}}},"白名单"),e("Button",{props:{type:"success",size:"small",disabled:"admin"!==t.username},style:{marginRight:"5px"},on:{click:function(){t.editForm=!0,t.ruleForm=r.row}}},"修改"),e("Poptip",{props:{title:"确定要删除吗！",confirm:!0,transfer:!0,placement:"top-end"},on:{"on-ok":function(){Object(s["a"])(r.row.id).then(function(e){t.fetchData()})},"on-cancel":function(){t.$Message.info("取消删除")}}},[e("Button",{props:{type:"error",size:"small",disabled:"admin"!==t.username}},"删除")])])}}),e}}),created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Object(s["c"])(this.listQuery).then(function(e){t.tableData=e.data.results,t.tableCount=e.data.count})},fetchWhiteipData:function(){var t=this,e={vhost:this.vhost};Object(s["b"])(e).then(function(e){t.ruleForm=e.data[0],t.ruleForm["vhost"]=t.vhost,t.ruleForm["action"]=e.data.length}).catch(function(e){console.log(e);var r=JSON.stringify(e.response.data);t.$Message.error(r)})},getDialogStatus:function(t){this.addForm=t,this.editForm=t,this.addWriteForm=t,this.fetchData()},changePage:function(t){this.listQuery.offset=(t-1)*this.listQuery.limit,this.fetchData()},changePagesize:function(t){this.listQuery.limit=t,this.fetchData()},searchClick:function(){this.fetchData()}}},S=O,j=(r("9873"),Object(m["a"])(S,a,o,!1,null,null,null));j.options.__file="cdnsites.vue";e["default"]=j.exports},"2d7e":function(t,e,r){"use strict";r.d(e,"f",function(){return n}),r.d(e,"c",function(){return s}),r.d(e,"g",function(){return i}),r.d(e,"a",function(){return u}),r.d(e,"d",function(){return l}),r.d(e,"e",function(){return c}),r.d(e,"b",function(){return m});var a=r("66df"),o=r("f121");function n(t){return a["a"].request({url:o["a"].cdnsites,method:"post",data:t})}function s(t){return a["a"].request({url:o["a"].cdnsites,method:"get",params:t})}function i(t,e){return a["a"].request({url:o["a"].cdnsites+t+"/",method:"put",data:e})}function u(t){return a["a"].request({url:o["a"].cdnsites+t+"/",method:"delete"})}function l(t){return a["a"].request({url:o["a"].whiteips,method:"get",params:t})}function c(t){return a["a"].request({url:o["a"].actionwhiteip,method:"post",data:t})}function m(t){return a["a"].request({url:o["a"].actionwhiteip,method:"get",params:t})}},8452:function(t,e,r){},9873:function(t,e,r){"use strict";var a=r("8452"),o=r.n(a);o.a}}]);